db:
  image: postgres:9.4
redis:
  image: redis:3.2
web:
  extends:
    file: docker-compose-base.yml
    service: python_base
  ports:
    - "8000:8000"
  links:
    - db
    - redis
  command:
    ./bin/run-dev.sh
rq_worker:
  extends:
    file: docker-compose-base.yml
    service: python_base
  links:
    - db
    - redis
  command:
    python manage.py rqworker default
rq_scheduler:
  extends:
    file: docker-compose-base.yml
    service: python_base
  links:
    - db
    - redis
    # django-rq doesn't support rqscheduler `retry` mode yet
    # so we need to use the original startup script, which retrieves
    # the
  command:
    rqscheduler --url=redis://redis:6379
